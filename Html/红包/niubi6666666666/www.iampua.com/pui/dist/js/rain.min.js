function preLoadImages(a){var e=arguments.length,t=function(a){var e=new Image;e.src=a};if(1==e)if("string"==typeof a&&(sLen=a.length)>1)t(a);else if("[object Array]"==Object.prototype.toString.call(arguments[0])&&a.length>0)for(var i=0;i<a.length;i++)t(a[i])}function setCookie(a,e,t){var i=a+"="+escape(e)+"; path=/";if(t>0){var n=new Date;n.setTime(n.getTime()+3600*t*1e3),i=i+"; expires="+n.toGMTString()}document.cookie=i}function getCookie(a){for(var e=document.cookie,t=e.split("; "),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==a)return unescape(n[1])}return""}function delCookie(a){var e=new Date;e.setTime(e.getTime()-1);var t=getCookie(a);null!=t&&(document.cookie=a+"="+t+"; path=/;expires="+e.toGMTString())}!function(){for(var a=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),s=window.setTimeout(function(){e(i+n)},n);return a=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a,e){a.raindropType=function(){var a=100*Math.random(),e="empty",t=0,i=0;return 22>=a?(e="plus",t=1):a>22&&40>=a?(e="plus",t=3):a>40&&55>=a?(e="plus",t=5):a>55&&65>=a?(e="plus",t=10):a>65&&68>=a?(e="multiply",t=2,i=1):a>68&&69.5>=a?(e="multiply",t=2,i=3):a>69.5&&70.5>=a?(e="multiply",t=2,i=5):a>70.5&&71>=a?(e="multiply",t=2,i=10):a>71&&73>=a?(e="multiply",t=3,i=1):a>73&&74>=a?(e="multiply",t=3,i=3):a>74&&74.8>=a?(e="multiply",t=3,i=5):a>74.8&&75>=a?(e="multiply",t=3,i=10):a>75&&85>=a?e="minus":a>85&&100>=a&&(e="empty"),{dataType:e,dataVal:t,dataPlus:i}},a.raindrop=function(a){var t=new raindropType,i={id:"raindrop"+(new Date).getTime().toString().substr(6),type:t.dataType,value:t.dataVal,plus:t.dataPlus,track:Math.floor(5*Math.random())},a=e.extend({},i,a),n=['<div class="cp empty" data-val="{dataVal}" data-track="{dataTrack}" id="{id}"><div class="wrap rotateOut animated"><div class="effect"></div></div></div>','<div class="cp multiply" data-val="{dataVal}" data-plus="{dataPlus}" data-track="{dataTrack}" id="{id}"><div class="wrap zoomOut animated_x"><div class="light rotate"></div><div class="effect"></div><div class="score m{dataVal} fadeIn animated_x">x{dataVal}</div><div class="score p{dataPlus} fadeOut animated_s">+{dataPlus}</div></div></div>','<div class="cp plus" data-val="{dataVal}" data-track="{dataTrack}" id="{id}"><div class="wrap zoomOut animated"><div class="effect"></div><div class="score p{dataVal}">+{dataVal}</div></div></div>','<div class="cp minus" data-val="{dataVal}" data-track="{dataTrack}" id="{id}"><div class="wrap zoomOutSwing animated"><div class="effect"></div><div class="score">{dataVal}</div></div>'],s="",c=n[0];switch(a.type){case"empty":c=n[0];break;case"multiply":c=n[1];break;case"plus":c=n[2];break;case"minus":c=n[3]}return s=c.replace(/\{dataVal\}/g,a.value).replace(/\{dataPlus\}/g,a.plus).replace("{dataTrack}",a.track).replace("{id}",a.id),{html:s,id:a.id,type:a.type,value:a.value,plus:a.plus}},a.rain=function(a){var t={container:"#rain_container",scoreBoard:"#score_board",initScore:0,genSpeed:500,maxClickTimesCallback:function(){},maxScoreCallback:function(){},onWatchClick:function(){},maxScore:150,maxClickTimes:50,isWatchMode:!1},a=e.extend({},t,a);this.score=a.initScore,this.maxScoreCallback=a.maxScoreCallback,this.maxClickTimesCallback=a.maxClickTimesCallback,this.onWatchClick=a.onWatchClick,this.maxScore=a.maxScore,this.maxClickTimes=a.maxClickTimes,this.isWatchMode=a.isWatchMode,this.openCount=0,this.genSpeed=a.genSpeed,this.$container=e(a.container),this.$scoreBoard=e(a.scoreBoard),this.version="1.0.1",this.author="Nelson Kuang",this.created="2017/07/24",this.genTimer=null,this.audios={empty:{index:0,el:e("#sounds .empty_sound")},multiply:{index:0,el:e("#sounds .multiply_sound")},plus:{index:0,el:e("#sounds .plus_sound")},minus:{index:0,el:e("#sounds .minus_sound")}},this.init()},rain.prototype={init:function(){this.$container.html(""),this.$scoreBoard.find("#score").html(this.score),this.$scoreBoard.removeClass("hide")},start:function(){var a=this;this.genTimer=setInterval(function(){function t(){c+=1.5,s-=1.5,n.css("-webkit-transform","translate3d("+s+"px, "+c+"px, 0)"),o=requestAnimationFrame(t)}var i=new raindrop;a.$container.append(i.html);var n=e("#"+i.id),s=0,c=0,o=0;t(),setTimeout(function(){0!=o&&cancelAnimationFrame(o),n.remove()},1e4),n.one("click",function(){if(a.isWatchMode)return a.onWatchClick(),!1;if(a.score>=a.maxScore||a.openCount>a.maxClickTimes)a.score>=a.maxScore?(a.updateScore("set",a.maxScore),a.maxScoreCallback()):a.maxClickTimesCallback(),a.stop();else{cancelAnimationFrame(o),"minus"==i.type&&(i.value=-1*Math.round(a.score/2),n.find(".score").html(i.value)),n.addClass("open"),a.updateScore(i.type,i.value,i.plus),a.openCount++;try{a.audios[i.type].index++,a.audios[i.type].index>4&&(a.audios[i.type].index=0),a.audios[i.type].el[a.audios[i.type].index].play()}catch(e){}}})},this.genSpeed)},stop:function(){this.genTimer&&(clearInterval(this.genTimer),this.$container.html(""))},updateScore:function(a,e,t){switch(a){case"empty":break;case"multiply":this.score+=e*t;break;case"plus":this.score+=e;break;case"minus":this.score+=e;break;case"set":this.score=e}this.score>this.maxScore&&"set"!=a&&(this.score=this.maxScore),this.$scoreBoard.find("#score").html(this.score);var i=this.score;setTimeout(function(){var a=new Date,e=a.getHours(),t=a.getMinutes();e=24-e-t/60,setCookie("rain_score",i,e.toFixed(2))},0)}}}(this,jQuery),function(a){a.fn.extend({countDown:function(e){var t={timeInSecond:3600,displayTpl:'<span class="h1">{h1}</span><span class="h2">{h2}</span>:<span class="m1">{m1}</span><span class="m2">{m2}</span>:<span class="s1">{s1}</span><span class="s2">{s2}</span>',callback:function(){}},e=a.extend({},t,e);this.each(function(){function t(a,t){var n=setInterval(function(){if(!(a>=1))return i.html(t.replace("{h1}",0).replace("{h2}",0).replace("{m1}",0).replace("{m2}",0).replace("{s1}",0).replace("{s2}",0)),clearInterval(n),void e.callback();a-=1;var s=Math.floor(a/3600),c=Math.floor(a/60%60),o=Math.floor(a%60);s=10>s?"0"+s:s.toString(),c=10>c?"0"+c:c.toString(),o=10>o?"0"+o:o.toString(),i.html(t.replace("{h1}",s.charAt(0)).replace("{h2}",s.charAt(1)).replace("{m1}",c.charAt(0)).replace("{m2}",c.charAt(1)).replace("{s1}",o.charAt(0)).replace("{s2}",o.charAt(1)))},1e3)}var i=a(this);t(e.timeInSecond,e.displayTpl)})}})}(jQuery);